[{"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\index.js":"1","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\App.js":"2","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\reportWebVitals.js":"3","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Nav\\Nav.js":"4","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Login\\Login.js":"5","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Register\\Register.js":"6","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\util\\auth.js":"7","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\UserProvider\\UserProvider.js":"8","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\UserContext.js":"9","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Movies\\Movies.js":"10"},{"size":308,"mtime":1609092539574,"results":"11","hashOfConfig":"12"},{"size":1480,"mtime":1609700604468,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":499162500000,"results":"14","hashOfConfig":"12"},{"size":3643,"mtime":1609699721397,"results":"15","hashOfConfig":"12"},{"size":4689,"mtime":1609699860779,"results":"16","hashOfConfig":"12"},{"size":9704,"mtime":1609649892100,"results":"17","hashOfConfig":"12"},{"size":302,"mtime":1609659135995,"results":"18","hashOfConfig":"12"},{"size":923,"mtime":1609698889461,"results":"19","hashOfConfig":"12"},{"size":170,"mtime":1609661840065,"results":"20","hashOfConfig":"12"},{"size":3467,"mtime":1609712154071,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"pahza8",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\index.js",[],["45","46"],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\App.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\reportWebVitals.js",[],["47","48"],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Nav\\Nav.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Login\\Login.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Register\\Register.js",["49"],"import React, { useState, useEffect, useRef } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport { nanoid } from 'nanoid';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  genreContainer: {\r\n    textAlign: 'center',\r\n    marginTop: 50,\r\n    padding: 25,\r\n  },\r\n  genreButton: {\r\n    height: 48,\r\n    borderRadius: 0,\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nconst GenreInputForm = ({\r\n  classes,\r\n  setState,\r\n  state,\r\n  userData,\r\n  registerQuery,\r\n  setRegisterQuery,\r\n}) => {\r\n  const [selectedGenres, setSelectedGenres] = useState({});\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [query, setQuery] = useState({\r\n    isLoading: false,\r\n    isSuccess: false,\r\n    isError: false,\r\n    data: [],\r\n  });\r\n  const [elements, setElements] = useState([]);\r\n  let updated = useRef(selectedGenres);\r\n\r\n  // Event Handlers\r\n  const handleClick = item => {\r\n    if (!updated.current[item.genre]) {\r\n      if (Object.keys(updated.current).length === 3) {\r\n        return;\r\n      }\r\n      setSelectedGenres(prev => {\r\n        updated.current = { ...prev, [item.genre]: { ...item } };\r\n        return { ...prev, [item.genre]: { ...item } };\r\n      });\r\n    } else {\r\n      setSelectedGenres(prev => {\r\n        delete prev[item.genre];\r\n        updated.current = { ...prev };\r\n        return { ...prev };\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    Object.keys(selectedGenres).length === 3\r\n      ? setDisabled(false)\r\n      : setDisabled(true);\r\n  }, [selectedGenres]);\r\n\r\n  useEffect(() => {\r\n    setQuery({ ...query, isLoading: true });\r\n    axios\r\n      .get('https://watch-this-instead.herokuapp.com/api/genres')\r\n      .then(res => {\r\n        setQuery({\r\n          ...query,\r\n          isLoading: false,\r\n          isSuccess: true,\r\n          data: [...res.data],\r\n        });\r\n      })\r\n      .catch(err =>\r\n        setQuery({ ...query, isLoading: false, isError: true, data: [err] })\r\n      );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!query.isLoading && query.isError) {\r\n      setElements([]);\r\n    }\r\n\r\n    if (!query.isLoading && query.isSuccess) {\r\n      let oldArr = [...query.data];\r\n      var maxVal = 4;\r\n      var delta = Math.floor(oldArr.length / maxVal);\r\n\r\n      for (let i = 0; i < oldArr.length; i = i + delta) {\r\n        const items = [];\r\n        for (let j = 0; j < 4; j++) {\r\n          oldArr[i + j] && items.push(oldArr[i + j]);\r\n        }\r\n        const containerItems = items.map(item => {\r\n          return (\r\n            <Grid\r\n              item\r\n              xs={12}\r\n              sm={3}\r\n              key={nanoid()}\r\n              onClick={() => handleClick(item)}\r\n            >\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                className={classes.genreButton}\r\n              >\r\n                {item.genre}\r\n              </Button>\r\n            </Grid>\r\n          );\r\n        });\r\n\r\n        const container = (\r\n          <Grid container spacing={2} key={nanoid()}>\r\n            {containerItems}\r\n          </Grid>\r\n        );\r\n        setElements(prev => {\r\n          return [...prev, container];\r\n        });\r\n      }\r\n    }\r\n  }, [\r\n    query.data,\r\n    query.isLoading,\r\n    query.isSuccess,\r\n    query.isError,\r\n    setSelectedGenres,\r\n    classes.genreButton,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      {query.isLoading ? (\r\n        <div> Loading... </div>\r\n      ) : query.isError ? (\r\n        <div> Hmm... seems like something went wrong </div>\r\n      ) : (\r\n        <>\r\n          <Container\r\n            component=\"main\"\r\n            disableGutters\r\n            maxWidth=\"xl\"\r\n            className={classes.genreContainer}\r\n          >\r\n            {elements.length > 0 && elements}\r\n            <GenreToSendButton\r\n              disabled={disabled}\r\n              setState={setState}\r\n              data={selectedGenres}\r\n              state={state}\r\n              userData={userData}\r\n              registerQuery={registerQuery}\r\n              setRegisterQuery={setRegisterQuery}\r\n            />\r\n          </Container>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nconst GenreToSendButton = ({\r\n  disabled,\r\n  state,\r\n  setState,\r\n  data,\r\n  userData,\r\n  registerQuery,\r\n  setRegisterQuery,\r\n}) => {\r\n  const handleClick = async () => {\r\n    setRegisterQuery({\r\n      ...registerQuery,\r\n      isLoading: true,\r\n    });\r\n\r\n    setState({\r\n      ...state,\r\n      current: 'Loading',\r\n    });\r\n    const createUserData = {\r\n      ...userData,\r\n      genres: Object.keys(data).map(key => key), // Needs to be array\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        'https://watch-this-instead.herokuapp.com/api/users/register',\r\n        createUserData\r\n      );\r\n      setRegisterQuery({\r\n        isError: false,\r\n        isSuccess: true,\r\n        isLoading: false,\r\n        data: res.data,\r\n      });\r\n\r\n      setState({\r\n        ...state,\r\n        current: 'Success',\r\n      });\r\n    } catch (err) {\r\n      setRegisterQuery({\r\n        isLoading: false,\r\n        isSuccess: false,\r\n        isError: true,\r\n        data: err,\r\n      });\r\n      setState({\r\n        ...state,\r\n        current: 'Error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    setState({ ...state, current: 'email' });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={handleBackClick}>Go Back</Button>\r\n      <Button disabled={disabled} onClick={handleClick}>\r\n        Register\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nconst EmailInputForm = ({\r\n  state,\r\n  classes,\r\n  handleChange,\r\n  userData,\r\n  setState,\r\n}) => {\r\n  const handleClick = () => {\r\n    setState({ ...state, current: 'genres' });\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Register\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                value={userData.email}\r\n                onChange={handleChange}\r\n                autoComplete=\"off\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={userData.password}\r\n                onChange={handleChange}\r\n                autoComplete=\"off\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={handleClick}\r\n          >\r\n            Continue\r\n          </Button>\r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link to=\"/login\" variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={5}></Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default function Register() {\r\n  const classes = useStyles();\r\n  const [state, setState] = useState({\r\n    current: 'email',\r\n  });\r\n\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const [query, setQuery] = useState({\r\n    isLoading: false,\r\n    isError: false,\r\n    isSuccess: false,\r\n    data: [],\r\n  });\r\n\r\n  // Event Handlers\r\n  const handleChange = e => {\r\n    setUserData({\r\n      ...userData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  if (state.current === 'email') {\r\n    return (\r\n      <EmailInputForm\r\n        classes={classes}\r\n        setState={setState}\r\n        userData={userData}\r\n        handleChange={handleChange}\r\n        state={state}\r\n      />\r\n    );\r\n  } else if (state.current === 'genres') {\r\n    return (\r\n      <GenreInputForm\r\n        classes={classes}\r\n        setState={setState}\r\n        state={state}\r\n        userData={userData}\r\n        registerQuery={query}\r\n        setRegisterQuery={setQuery}\r\n      />\r\n    );\r\n  } else if (state.current === 'Loading') {\r\n    return <div>Loading data...</div>;\r\n  } else if (state.current === 'Success') {\r\n    return <Redirect to=\"/login\" />;\r\n  } else {\r\n    return <div>Error</div>;\r\n  }\r\n}\r\n","C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\util\\auth.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\UserProvider\\UserProvider.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\UserContext.js",[],"C:\\Users\\mrive\\desktop\\projects\\watch-this-instead-client\\src\\components\\Movies\\Movies.js",["50","51"],{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"52","replacedBy":"56"},{"ruleId":"54","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":106,"column":6,"nodeType":"60","endLine":106,"endColumn":8,"suggestions":"61"},{"ruleId":"62","severity":1,"message":"63","line":55,"column":11,"nodeType":"64","messageId":"65","endLine":55,"endColumn":15},{"ruleId":"62","severity":1,"message":"66","line":56,"column":18,"nodeType":"64","messageId":"65","endLine":56,"endColumn":27},"no-native-reassign",["67"],"no-negated-in-lhs",["68"],["67"],["68"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'query'. Either include it or remove the dependency array. You can also do a functional update 'setQuery(q => ...)' if you only need 'query' in the 'setQuery' call.","ArrayExpression",["69"],"no-unused-vars","'user' is assigned a value but never used.","Identifier","unusedVar","'setMovies' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"70","fix":"71"},"Update the dependencies array to be: [query]",{"range":"72","text":"73"},[2908,2910],"[query]"]